\apendice{Plan de Proyecto Software}

\section{Introducción}
La planificación de un proyecto es una fase esencial en desarrollo de éste, ya que permite comprobar y guiar el proyecto según las necesidades actuales y futuras.

Dentro de este plan para el desarrollo del proyecto se pueden diferenciar dos puntos sobre los que se puede enfocar este estudio:
\begin{itemize}
	\item \textbf{Temporal}: enfoque en el que se analiza la evolución del proyecto en el tiempo. Al utilizar una metodología SCRUM, se ha divido el desarrollo en \textit{sprints}, que dependiendo de las funcionalidades a desarrollar, y debido a la situación que se ha pasado con el COVID-19, han tenido distintas duraciones.
	\item \textbf{Viabilidad}: comprobación de la adecuación del proyecto tanto desde el ámbito económico como desde el ámbito legal.
\end{itemize}
\section{Planificación temporal}
Como ya se ha comentado, la planificación temporal se ha divido en distintos \textit{sprints} de 2 semanas cada uno, en lo cuales se realizaron distintas tareas y reuniones. Cabe destacar que antes de realizar el primer \textit{sprint} se desarrolló la aplicación FIS sobre la cuál será implementado en el futuro el proyecto desarrollado.

\subsection{\textit{Sprint} 0}
En este \textit{sprint} se creó la aplicación para el Hospital Universitario de Burgos llamada FIS-HUBU. Esta aplicación, como se ha visto en el apartado~\ref{desarrolloFH}, sirve para realizar vídeo llamadas entre médicos y los pacientes con Parkinson en las cuales se realizan rehabilitaciones para mejorar su calidad de vida. Como se ha explicado, esta aplicación cuenta con dos partes, una para los médicos o responsables y otra para los pacientes. Las tareas realizadas en este \textit{sprint} son las siguientes:
\begin{itemize}
	\item Investigación sobre plataformas de vídeo llamadas.
	\item Creación de la estructura base de la página web.
	\item Diseño e implementación de la base de datos.
	\item Creación del login por usuario, guardando una \textit{cookie} para mantener la sesión.
	\item \textit{Backend} de las páginas de los pacientes, donde se  incluye la creación de las llamadas, el calculo de la evolución a partir de los datos en la base de datos, la grabación de la cámara del paciente y subida a un servidor propio de la universidad...
	\item \textit{Backend} de las páginas de los responsables.
\end{itemize}

Tras desarrollar la aplicación se empezaron con las tareas de explotación de la aplicación, en donde se cogieron los dispositivos para los paciente y se les instalaron todo el \textit{software} necesario para funcionar correctamente, y con ello poder grabar los vídeos y subirlos a un servidor propio. Debido a la aparición del COVID-19 y el posterior confinamiento sufrido y las consiguientes medidas de seguridad no se pudo empezar a instalar los dispositivos en las casa de los pacientes.
\subsection{\textit{Sprint} 1: 17/02/2020 - 26/02/2020}
Este es el primer \textit{sprint} real del desarrollo de la parte del proyecto de visión artificial, en el se realizaron las primeras tareas de creación del repositorio en \textit{GitHub} y la creación de la estructura del mismo. Además, se creo el documento \LaTeX{} a partir de la plantilla de la asignatura. Las tareas más relevantes en este primer \textit{sprint} fueron las relacionadas con la configuración de \textit{Gamma} y los primeros pasos en la investigación de algoritmos de visión por computador y detección de movimiento, como son \textit{Detectron2} y \textit{PoseNet}.
\subsection{\textit{Sprint} 2: 27/02/2020 - 11/03/2020}
En este \textit{sprint} se realizó una tarea fundamental dentro del desarrollo del proyecto, que es la investigación y elección del algoritmo de visión artificial para la obtención de la postura, que se usará en los fotogramas de los vídeos recogidos con la aplicación FIS-HUBU y para compararlos con otros vídeos base para saber la exactitud del ejercicio. Esta tarea de investigación de los distintos algoritmos dio como resultado que el \textit{Dectectron2} (apartado~\ref{dectectron}) es el algoritmo que más se amoldaba al problema del proyecto.

Además, en este \textit{sprint} se realizaron las tareas de documentación necesarias sobre los algoritmos candidatos y sobre la selección del mejor.
\subsection{\textit{Sprint} 3: 12/03/2020 - 02/05/2020}
En este tercer \textit{sprint} se profundizó en la investigación de los distintos algoritmos y modelos de \textit{Detectron2}. En este \textit{sprint} se realizaron las siguientes tareas:
\begin{itemize}
	\item Documentación de los primeros objetivos del proyecto.
	\item Estudio de la herramienta \textit{Detectron2}.
	\item Estudio de los modelos ya creados en \textit{Detectron2}.
	\item Estudio sobre los modelos de detección de posición de \textit{Detectron2}.
	\item Estudio del efecto del \textit{threshold} en la detección.
	\item Interpretación de la salida obtenida.
	\item Creación de la clase de posición y extracción de características a partir de los datos devueltos por el modelo.
	\item Documentación de los aspectos relevantes.
\end{itemize}

\subsection{\textit{Sprint} 4: 03/05/202 - 05/06/2020}
Este \textit{sprint} se realizaron tareas muy importantes tanto en la documentación como en la implementación, ya que se documento el concepto teórico más importante, las redes neuronales convolucionales, y se implementó las primeras versiones de la comparación de posiciones. Las principales tareas que se realizaron en este \textit{sprint} son:
\begin{itemize}
	\item Documentación de los conceptos teóricos, donde destaca la documentación teórica de las redes neuronales convolucionales que tiene el mayor peso teórico del proyecto.
	\item Documentación de las técnicas y herramientas usadas hasta el momento.
	\item Cambios en la memoria de la primera revisión por parte de los tutores.
	\item Desarrollo de la primera versión de comparación de posiciones.
	\item Implementación de la corrección del \textit{bug} en la comparación de los brazos.
	\item Creación de imágenes para probar la comparación de posiciones.
	\item Test con las imágenes obtenidas.
	\item Documentación de los aspectos relevantes ocurridos en este \textit{sprint}. 
\end{itemize}

\subsection{\textit{Sprint} 5: 06/06/2020 - 12/06/2020}
En este \textit{sprint} se ha terminado de implementar las versiones finales de la posición y de la comparación de estas, tras volver a encontrar un error en las pruebas. El conjunto de tareas que se han realizado en este \textit{sprint} son:
\begin{itemize}
	\item Creación de la versión 3 de la comparación de posiciones con la introducción del cálculo de la media.
	\item Corrección del error en la comparación de los codos, nueva versión de la clase de la posición.
	\item Implementación sistema de comprobación y extracción de estadísticas.
	\item Creación de versión reducida de la clase de la posición y pruebas temporales.
	\item Paso de todas las versiones implementadas a ficheros \textit{Python}.
	\item Documentación de los aspectos relevantes del \textit{sprint}.
	\item Obtención de la imagen solo con el esqueleto calculado.
	\item Modificaciones hechas por la segunda revisión de la memoria.
\end{itemize}

\subsection{\textit{Sprint} 6: 13/06/2020 - 27/06/2020}
Este fue el primer \textit{sprint} de la recta final del proyecto, donde se comenzó con la unión del proyecto con el flujo implementado del compañero y con las pruebas referentes a este proceso, que por la cantidad de datos y pruebas que se realizaron no se pudo terminar en este \textit{sprint}. Además, en este \textit{sprint} se comenzó a documentar las distintas partes de la memoria que se tenían planteadas pero no documentadas, en este apartado entra:
\begin{itemize}
	\item Documentación del manual del programador.
	\item Documentación del diseño.
	\item Documentación de los trabajos relacionados.
	\item Documentación de la introducción del documento.
	\item Documentación del resumen y \textit{abstract}.
	\item Documentación de más aspectos teóricos.
	\item Documentación de las conclusiones y líneas futuras de trabajo.
\end{itemize}

\section{Estudio de viabilidad}

En este apartado se va a comentar la viabilidad del proyecto tanto de forma económica calculando el coste total que debería de haber costado el desarrollo del proyecto, y la viabilidad legal de las librerías y herramientas utilizadas.

\subsection{Viabilidad económica}

En este subapartado se encuentran los cálculos económicos del proyecto general. Para ello se han realizado los cálculos de manera conjunta con José Luis Garrido Labrador, para así poder abarcar el conjunto completo del proyecto desde el desarrollo de la aplicación hasta el desarrollo del flujo y la comparación de ejercicios.

Para realizar el cálculo se han divido los gastos en:
\begin{itemize}
	\item \textbf{Coste personal} (tabla~\ref{tab:costes_personal}): contratación del personal de investigación y desarrollo del proyecto.
	\item \textbf{Coste \textit{hardware}} (tabla~\ref{tab:costes_hardware}): dispositivos \textit{hardware} necesarios en el proyecto.
	\item \textbf{Coste servicios} (tabla~\ref{tab:costes_servicios}): conjunto de servicios necesarios para el funcionamiento del proyecto.
\end{itemize}

\begin{table}\centering
	\begin{tabular}[]{@{}l r@{}}
		\toprule
		\textbf{Concepto} & \textbf{Coste (\euro{})} \\
		\midrule
		Salario mensual bruto & 2.047,78~\cite{salariales} \\
		Seguridad Social (30,04\%) & 615,15 \\
		Retención IRPF (2\%) & 28,65 \\
		Salario mensual neto & 1.403,97 \\\hubu
		\textbf{Total 6 meses y dos empleados} &  24.573,36 \\
		\bottomrule
	\end{tabular}
	\caption{Costes de personal.}
	\label{tab:costes_personal}
\end{table}

\begin{table}
	\centering
	\begin{tabular}[]{@{}l c r@{}}
		\toprule
		\textbf{Concepto} & \textbf{Coste (\euro{})} & \textbf{Coste amortizado (\euro{})} \\
		\otoprule
		Ordenador de desarrollo (x2) & 950 &  59,37\\
		Dispositivos pacientes (x9) & 100 & 6,25\\
		\textit{Webcam} pacientes (x9) & 150 &9,38\\
		\textit{MainFrame Gamma}  & 3.000 & 187,5 \\ 
		\textit{Gamma} GPU (x3) & 1.500 &  93,75\\
		\textit{MainFrame Alpha}  & 2.000 & 125 \\\hubu
		\textbf{Total} & 13.650 & 853,16\\
		\bottomrule
	\end{tabular}
	\caption{Costes de \textit{hardware}.}
	\label{tab:costes_hardware}.
\end{table}

\begin{table}
	\centering
	\begin{tabular}[]{@{}l r@{}}
		\toprule
		\textbf{Concepto} & \textbf{Coste (\euro{})}\\
		\otoprule
		Suscripción \textit{Ngrok}  & 7,33 \\
		Lineas \textit{Vodafone} (x4) & 30 \\\hubu
		\textbf{Total (por 6 meses)} & 763,98\\
		\bottomrule
	\end{tabular}
	\caption{Costes de servicios.}
	\label{tab:costes_servicios}.
\end{table}

Finalmente se ha realizado un cálculo final del coste del proyecto, tabla~\ref{tab:coste_final}.

\begin{table}
	\centering
	\begin{tabular}[]{@{}l r@{}}
		\toprule
		\textbf{Tipo} & \textbf{Coste (\euro{})}\\
		\otoprule
		Personal  & 24.573,36 \\
		\textit{Hardware}& 13.650 \\
		Servicios & 763,98\\\hubu
		\textbf{Total}&38.987,34\\
		\bottomrule
	\end{tabular}
	\caption{Costes final.}
	\label{tab:coste_final}.
\end{table}

\subsection{Viabilidad legal}
En este subapartado se va a comentar las distintas licencias que tienen las herramientas y librerías utilizadas en el proyecto, así como se comenta la licencia final que tiene el proyecto.

Las licencias de las librerías y herramientas utilizadas en el desarrollo del proyecto se pueden ver en la tabla~\ref{tab:lic}.

\begin{table}[h]
	\centering
		\begin{tabular}{cc}
			\toprule
			\textbf{Librería-Herramienta}&\textbf{Licencia}\\
			\midrule
			\textit{Numpy} & BSD 3\\
			\textit{Pandas} & BSD 3\\
			\textit{OpenCV}& BSD 3\\
			\textit{Pynvml} & BSD 3\\
			\textit{Matplotlib} &  PSF\\
			\textit{Seaborn} & BSD 3\\
			\textit{Plotly} & MIT\\
			\textit{Torchvision} & BSD 3\\
			\textit{Python} & PSF\\
			\textit{Detectron2}& Apache 2.0\\
			\bottomrule
		\end{tabular}
	\caption{Tabla con las licencias de las librerías y herramientas utilizadas.}
	\label{tab:lic}
\end{table}

Teniendo en cuenta estas licencias, y las licencias de las herramientas usadas tanto en la aplicación final de rehabilitación y las licencias de las herramientas y librerías usadas por el compañero se ha decido utilizar la licencia \textit{GPL v3.0} a partir de las licencias más restrictivas.

Con esta licencia \textit{GPL v3.0} se puede utilizar el \textit{software} desarrollado para uso comercial, se puede modificar las implementaciones realizadas,  distribuirlas, realizar patentes sobre ellas y usarlas de forma privada.
